EESchema Schematic File Version 2
LIBS:power
LIBS:device
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:regul
LIBS:74xx
LIBS:cmos4000
LIBS:adc-dac
LIBS:memory
LIBS:xilinx
LIBS:microcontrollers
LIBS:dsp
LIBS:microchip
LIBS:analog_switches
LIBS:motorola
LIBS:texas
LIBS:intel
LIBS:audio
LIBS:interface
LIBS:digital-audio
LIBS:philips
LIBS:display
LIBS:cypress
LIBS:siliconi
LIBS:opto
LIBS:atmel
LIBS:contrib
LIBS:valves
LIBS:stm32
LIBS:generic_electric_unicycle-cache
EELAYER 25 0
EELAYER END
$Descr A3 16535 11693
encoding utf-8
Sheet 1 1
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L STM32F103C8 U?
U 1 1 5643CD2E
P 5450 5350
F 0 "U?" H 4150 7000 50  0000 C CNN
F 1 "STM32F103C8" H 6500 3700 50  0000 C CNN
F 2 "LQFP48" H 5450 5350 50  0000 C CNN
F 3 "" H 5450 5350 50  0000 C CNN
	1    5450 5350
	1    0    0    -1  
$EndComp
Wire Bus Line
	11250 2000 12250 2000
Wire Bus Line
	12250 2000 12250 2450
Wire Bus Line
	12250 2450 11250 2450
Wire Bus Line
	11250 2450 11250 2000
Text Notes 11400 2250 0    60   ~ 0
Mosfet A - Low
Wire Bus Line
	13000 2000 14000 2000
Wire Bus Line
	14000 2000 14000 2450
Wire Bus Line
	14000 2450 13000 2450
Wire Bus Line
	13000 2450 13000 2000
Text Notes 13150 2250 0    60   ~ 0
Mosfet A - High
Wire Bus Line
	11250 2900 12250 2900
Wire Bus Line
	12250 2900 12250 3350
Wire Bus Line
	12250 3350 11250 3350
Wire Bus Line
	11250 3350 11250 2900
Text Notes 11400 3150 0    60   ~ 0
Mosfet B - Low
Wire Bus Line
	13000 2900 14000 2900
Wire Bus Line
	14000 2900 14000 3350
Wire Bus Line
	14000 3350 13000 3350
Wire Bus Line
	13000 3350 13000 2900
Text Notes 13150 3150 0    60   ~ 0
Mosfet B - High
Wire Bus Line
	11250 3750 12250 3750
Wire Bus Line
	12250 3750 12250 4200
Wire Bus Line
	12250 4200 11250 4200
Wire Bus Line
	11250 4200 11250 3750
Text Notes 11400 4000 0    60   ~ 0
Mosfet C - Low
Wire Bus Line
	13000 3750 14000 3750
Wire Bus Line
	14000 3750 14000 4200
Wire Bus Line
	14000 4200 13000 4200
Wire Bus Line
	13000 4200 13000 3750
Text Notes 13150 4000 0    60   ~ 0
Mosfet C - High
Wire Wire Line
	14350 2200 14000 2200
Wire Wire Line
	14350 1550 14350 2200
Wire Wire Line
	14350 2200 14350 3150
Wire Wire Line
	14350 3150 14350 3950
Wire Wire Line
	14350 3150 14000 3150
Connection ~ 14350 2200
Wire Wire Line
	14350 3950 14000 3950
Connection ~ 14350 3150
Wire Wire Line
	11000 3950 11250 3950
Wire Wire Line
	11000 2200 11000 3100
Wire Wire Line
	11000 3100 11000 3950
Wire Wire Line
	11000 3950 11000 7500
Wire Wire Line
	11000 7500 11000 8350
Wire Wire Line
	11000 8350 11000 8450
Wire Wire Line
	11250 2200 11000 2200
Wire Wire Line
	11250 3100 11000 3100
Connection ~ 11000 3100
Text Label 14350 1550 0    60   ~ 0
48V_battery
Text Label 11000 9100 0    60   ~ 0
GND_battery
Wire Wire Line
	6950 4850 8000 4850
Text Label 7350 4850 0    60   ~ 0
Bridge_A-High
Wire Wire Line
	6950 4950 8000 4950
Text Label 7350 4950 0    60   ~ 0
Bridge_B-High
Wire Wire Line
	6950 5050 8000 5050
Text Label 7350 5050 0    60   ~ 0
Bridge_C-High
Wire Wire Line
	2900 6550 3950 6550
Text Label 2900 6550 0    60   ~ 0
Bridge_A-Low
Wire Wire Line
	2900 6650 3950 6650
Text Label 2900 6650 0    60   ~ 0
Bridge_B-Low
Wire Wire Line
	2900 6750 3950 6750
Text Label 2900 6750 0    60   ~ 0
Bridge_C-Low
Wire Wire Line
	12250 2200 12350 2200
Wire Wire Line
	12350 2200 13000 2200
Wire Wire Line
	12250 3100 13000 3100
Wire Wire Line
	12250 3950 13000 3950
Wire Wire Line
	12350 2200 12350 2500
Wire Wire Line
	12350 2500 12800 2500
Connection ~ 12350 2200
Text Label 12350 2500 0    60   ~ 0
Motor_yellow
Wire Wire Line
	12350 3100 12350 3400
Wire Wire Line
	12350 3400 12800 3400
Text Label 12350 3400 0    60   ~ 0
Motor_green
Wire Wire Line
	12350 3950 12350 4250
Wire Wire Line
	12350 4250 12800 4250
Text Label 12350 4250 0    60   ~ 0
Motor_blue
Wire Wire Line
	11750 2450 11750 2600
Wire Wire Line
	11750 2600 10050 2600
Text Label 10050 2600 0    60   ~ 0
Bridge_A-Low
Wire Wire Line
	11750 3500 10050 3500
Text Label 10050 3500 0    60   ~ 0
Bridge_B-Low
Wire Wire Line
	11750 3500 11750 3350
Connection ~ 11000 3950
$Comp
L R R?
U 1 1 5643D333
P 11000 8600
F 0 "R?" V 11080 8600 50  0000 C CNN
F 1 "0.007" V 11000 8600 39  0000 C CNN
F 2 "" V 10930 8600 30  0000 C CNN
F 3 "" H 11000 8600 30  0000 C CNN
	1    11000 8600
	1    0    0    -1  
$EndComp
Wire Wire Line
	11000 8750 11000 8850
Wire Wire Line
	11000 8850 11000 9100
Text Notes 11450 8700 0    60   ~ 0
Power resistor to\nmeasure the motor current
Wire Wire Line
	11750 4400 10050 4400
Text Label 10050 4400 0    60   ~ 0
Bridge_C-Low
Wire Wire Line
	11750 4400 11750 4200
Connection ~ 11000 7500
Text Label 14000 5650 0    60   ~ 0
Current_signal
Wire Wire Line
	6950 4450 8000 4450
Text Label 7350 4450 0    60   ~ 0
PS_signal(calibrate_wheel??)
Wire Wire Line
	13450 2600 15450 2600
Text Label 14800 2600 0    60   ~ 0
Bridge_A-High
Wire Wire Line
	13450 2600 13450 2450
Wire Wire Line
	13450 3500 15450 3500
Text Label 14800 3500 0    60   ~ 0
Bridge_B-High
Wire Wire Line
	13450 4400 15450 4400
Text Label 14800 4400 0    60   ~ 0
Bridge_C-High
Wire Wire Line
	13450 3500 13450 3350
Wire Wire Line
	13450 4400 13450 4200
Wire Wire Line
	6950 4250 8000 4250
Text Label 7400 4250 0    60   ~ 0
Hall_sensor_A
Wire Wire Line
	6950 4150 8000 4150
Text Label 7400 4150 0    60   ~ 0
Hall_sensor_B
Wire Wire Line
	6950 4050 8000 4050
Text Label 7400 4050 0    60   ~ 0
Hall_sensor_C
Wire Wire Line
	6950 5550 8450 5550
Text Label 7350 5550 0    60   ~ 0
LED_1-battery_indicator
Wire Wire Line
	2450 5650 3950 5650
Text Label 2450 5650 0    60   ~ 0
LED_2-battery_indicator
Wire Wire Line
	2450 5750 3950 5750
Text Label 2450 5750 0    60   ~ 0
LED_3-battery_indicator
Wire Wire Line
	2450 6050 3950 6050
Text Label 2450 6050 0    60   ~ 0
LED_4-battery_indicator
Wire Wire Line
	2450 6150 3950 6150
Text Label 2450 6150 0    60   ~ 0
LED-power_switcher
Wire Wire Line
	2450 5850 3950 5850
Text Label 2450 5850 0    60   ~ 0
IMU_MPU6050-SCL
Wire Wire Line
	2450 5950 3950 5950
Text Label 2450 5950 0    60   ~ 0
IMU_MPU6050-SDA
Wire Wire Line
	2450 5550 3950 5550
Text Label 2450 5550 0    60   ~ 0
Buzzer(??)
Wire Wire Line
	2450 5250 3950 5250
Text Label 2450 5250 0    60   ~ 0
BMF_signal-Green_B
Wire Wire Line
	2450 5350 3950 5350
Text Label 2450 5350 0    60   ~ 0
BMF_signal-Blue_C
Wire Wire Line
	6950 4650 8000 4650
Text Label 7350 4650 0    60   ~ 0
BMF_signal-Yellow_A
Wire Wire Line
	6950 4750 8000 4750
Text Label 7350 4750 0    60   ~ 0
Current_signal
$Comp
L R R?
U 1 1 5671EB12
P 11250 8600
F 0 "R?" V 11330 8600 50  0000 C CNN
F 1 "0.007" V 11250 8600 39  0000 C CNN
F 2 "" V 11180 8600 30  0000 C CNN
F 3 "" H 11250 8600 30  0000 C CNN
	1    11250 8600
	1    0    0    -1  
$EndComp
Wire Wire Line
	11250 8450 11250 8350
Wire Wire Line
	11250 8350 11000 8350
Connection ~ 11000 8350
Wire Wire Line
	11250 8750 11250 8850
Wire Wire Line
	11250 8850 11000 8850
Connection ~ 11000 8850
$Comp
L R R?
U 1 1 5671EC9C
P 11500 7500
F 0 "R?" V 11580 7500 50  0000 C CNN
F 1 "1k" V 11500 7500 50  0000 C CNN
F 2 "" V 11430 7500 30  0000 C CNN
F 3 "" H 11500 7500 30  0000 C CNN
	1    11500 7500
	0    1    1    0   
$EndComp
Wire Wire Line
	11000 7500 11350 7500
$Comp
L BC547 Q?
U 1 1 5671ED7F
P 12150 7500
F 0 "Q?" H 12350 7575 50  0000 L CNN
F 1 "??" H 12350 7500 50  0000 L CNN
F 2 "TO-92" H 12350 7425 50  0000 L CIN
F 3 "" H 12150 7500 50  0000 L CNN
	1    12150 7500
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR?
U 1 1 5671EDC6
P 12250 7800
F 0 "#PWR?" H 12250 7550 50  0001 C CNN
F 1 "GND" H 12250 7650 50  0000 C CNN
F 2 "" H 12250 7800 50  0000 C CNN
F 3 "" H 12250 7800 50  0000 C CNN
	1    12250 7800
	1    0    0    -1  
$EndComp
Wire Wire Line
	12250 7700 12250 7800
Wire Wire Line
	11650 7500 11950 7500
Wire Bus Line
	9000 7950 9600 7950
Wire Bus Line
	9600 8250 9000 8250
Wire Bus Line
	9000 8250 9000 7950
Text Notes 9050 8200 0    60   ~ 0
Hall sensor\nA
Wire Wire Line
	8250 8100 9000 8100
Text Label 8250 8100 0    60   ~ 0
Hall_sensor_A
Wire Bus Line
	9600 7950 9600 8250
Wire Bus Line
	9000 8300 9600 8300
Wire Bus Line
	9600 8600 9000 8600
Wire Bus Line
	9000 8600 9000 8300
Text Notes 9050 8550 0    60   ~ 0
Hall sensor\nB
Wire Wire Line
	8250 8450 9000 8450
Text Label 8250 8450 0    60   ~ 0
Hall_sensor_B
Wire Bus Line
	9600 8300 9600 8600
Wire Bus Line
	9000 8650 9600 8650
Wire Bus Line
	9600 8950 9000 8950
Wire Bus Line
	9000 8950 9000 8650
Text Notes 9050 8900 0    60   ~ 0
Hall sensor\nC
Wire Wire Line
	8250 8800 9000 8800
Text Label 8250 8800 0    60   ~ 0
Hall_sensor_C
Wire Bus Line
	9600 8650 9600 8950
$Comp
L R R?
U 1 1 5671F060
P 12250 6900
F 0 "R?" V 12330 6900 50  0000 C CNN
F 1 "20k" V 12250 6900 50  0000 C CNN
F 2 "" V 12180 6900 30  0000 C CNN
F 3 "" H 12250 6900 30  0000 C CNN
	1    12250 6900
	-1   0    0    1   
$EndComp
Wire Wire Line
	12250 7050 12250 7150
Wire Wire Line
	12250 7150 12250 7300
Wire Wire Line
	12250 6750 12250 6700
$Comp
L +3V3 #PWR?
U 1 1 5671F1AB
P 12250 6700
F 0 "#PWR?" H 12250 6550 50  0001 C CNN
F 1 "+3V3" H 12250 6840 50  0000 C CNN
F 2 "" H 12250 6700 50  0000 C CNN
F 3 "" H 12250 6700 50  0000 C CNN
	1    12250 6700
	1    0    0    -1  
$EndComp
$Comp
L R R?
U 1 1 5671F1F3
P 12750 7150
F 0 "R?" V 12830 7150 50  0000 C CNN
F 1 "510" V 12750 7150 50  0000 C CNN
F 2 "" V 12680 7150 30  0000 C CNN
F 3 "" H 12750 7150 30  0000 C CNN
	1    12750 7150
	0    1    1    0   
$EndComp
Wire Wire Line
	12600 7150 12250 7150
Connection ~ 12250 7150
Wire Wire Line
	12900 7150 13050 7150
Wire Wire Line
	13050 7150 14150 7150
$Comp
L C C?
U 1 1 5671F396
P 13050 7500
F 0 "C?" H 13075 7600 50  0000 L CNN
F 1 "C" H 13075 7400 50  0000 L CNN
F 2 "" H 13088 7350 50  0000 C CNN
F 3 "" H 13050 7500 50  0000 C CNN
	1    13050 7500
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR?
U 1 1 5671F3DB
P 13050 7800
F 0 "#PWR?" H 13050 7550 50  0001 C CNN
F 1 "GND" H 13050 7650 50  0000 C CNN
F 2 "" H 13050 7800 50  0000 C CNN
F 3 "" H 13050 7800 50  0000 C CNN
	1    13050 7800
	1    0    0    -1  
$EndComp
Wire Wire Line
	13050 7650 13050 7800
Wire Wire Line
	13050 7350 13050 7150
Connection ~ 13050 7150
Wire Wire Line
	2900 6450 3950 6450
Text Label 2900 6450 0    60   ~ 0
Max_current_signal
Text Label 13300 7150 0    60   ~ 0
Max_current_signal
$Comp
L R R?
U 1 1 5671FC23
P 11500 5550
F 0 "R?" V 11580 5550 50  0000 C CNN
F 1 "10k" V 11500 5550 50  0000 C CNN
F 2 "" V 11430 5550 30  0000 C CNN
F 3 "" H 11500 5550 30  0000 C CNN
	1    11500 5550
	0    1    1    0   
$EndComp
Wire Wire Line
	11000 5550 11350 5550
Wire Wire Line
	11650 5550 11950 5550
Wire Wire Line
	11950 5550 12450 5550
Wire Wire Line
	12450 5550 13200 5550
$Comp
L C C?
U 1 1 5671FCFB
P 11950 5750
F 0 "C?" H 11975 5850 50  0000 L CNN
F 1 "C" H 11975 5650 50  0000 L CNN
F 2 "" H 11988 5600 50  0000 C CNN
F 3 "" H 11950 5750 50  0000 C CNN
	1    11950 5750
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR?
U 1 1 5671FD01
P 11950 5900
F 0 "#PWR?" H 11950 5650 50  0001 C CNN
F 1 "GND" H 11950 5750 50  0000 C CNN
F 2 "" H 11950 5900 50  0000 C CNN
F 3 "" H 11950 5900 50  0000 C CNN
	1    11950 5900
	1    0    0    -1  
$EndComp
Wire Wire Line
	11950 5900 11950 5900
Wire Wire Line
	11950 5450 11950 5550
Wire Wire Line
	11950 5550 11950 5600
$Comp
L R R?
U 1 1 5671FDCC
P 11950 5300
F 0 "R?" V 12030 5300 50  0000 C CNN
F 1 "220k" V 11950 5300 50  0000 C CNN
F 2 "" V 11880 5300 30  0000 C CNN
F 3 "" H 11950 5300 30  0000 C CNN
	1    11950 5300
	-1   0    0    1   
$EndComp
Wire Wire Line
	11950 5150 11950 5050
$Comp
L +3V3 #PWR?
U 1 1 5671FDD4
P 11950 5050
F 0 "#PWR?" H 11950 4900 50  0001 C CNN
F 1 "+3V3" H 11950 5190 50  0000 C CNN
F 2 "" H 11950 5050 50  0000 C CNN
F 3 "" H 11950 5050 50  0000 C CNN
	1    11950 5050
	1    0    0    -1  
$EndComp
$Comp
L LM2903 U?
U 1 1 5671FE39
P 13500 5650
F 0 "U?" H 13650 5800 50  0000 C CNN
F 1 "LM358" H 13750 5500 50  0000 C CNN
F 2 "" H 13500 5650 50  0000 C CNN
F 3 "" H 13500 5650 50  0000 C CNN
	1    13500 5650
	1    0    0    -1  
$EndComp
Connection ~ 11950 5550
$Comp
L GND #PWR?
U 1 1 5671FFC8
P 13400 5950
F 0 "#PWR?" H 13400 5700 50  0001 C CNN
F 1 "GND" H 13400 5800 50  0000 C CNN
F 2 "" H 13400 5950 50  0000 C CNN
F 3 "" H 13400 5950 50  0000 C CNN
	1    13400 5950
	1    0    0    -1  
$EndComp
Wire Wire Line
	13400 5350 13400 5250
$Comp
L +3V3 #PWR?
U 1 1 5671FFDD
P 13400 5250
F 0 "#PWR?" H 13400 5100 50  0001 C CNN
F 1 "+3V3" H 13400 5390 50  0000 C CNN
F 2 "" H 13400 5250 50  0000 C CNN
F 3 "" H 13400 5250 50  0000 C CNN
	1    13400 5250
	1    0    0    -1  
$EndComp
$Comp
L R R?
U 1 1 56720075
P 12950 6050
F 0 "R?" V 13030 6050 50  0000 C CNN
F 1 "1k" V 12950 6050 50  0000 C CNN
F 2 "" V 12880 6050 30  0000 C CNN
F 3 "" H 12950 6050 30  0000 C CNN
	1    12950 6050
	-1   0    0    1   
$EndComp
Wire Wire Line
	12950 5750 12950 5900
Wire Wire Line
	12800 5750 12950 5750
Wire Wire Line
	12950 5750 13200 5750
$Comp
L GND #PWR?
U 1 1 567201E5
P 12950 6200
F 0 "#PWR?" H 12950 5950 50  0001 C CNN
F 1 "GND" H 12950 6050 50  0000 C CNN
F 2 "" H 12950 6200 50  0000 C CNN
F 3 "" H 12950 6200 50  0000 C CNN
	1    12950 6200
	1    0    0    -1  
$EndComp
$Comp
L R R?
U 1 1 5672023E
P 12650 5750
F 0 "R?" V 12730 5750 50  0000 C CNN
F 1 "10k" V 12650 5750 50  0000 C CNN
F 2 "" V 12580 5750 30  0000 C CNN
F 3 "" H 12650 5750 30  0000 C CNN
	1    12650 5750
	0    -1   -1   0   
$EndComp
Connection ~ 12950 5750
Wire Wire Line
	12500 5750 12450 5750
Wire Wire Line
	12450 5750 12450 5550
Connection ~ 12450 5550
Wire Wire Line
	13800 5650 14650 5650
$EndSCHEMATC
